{"format_version":"1.1","terraform_version":"1.2.3","planned_values":{"root_module":{"child_modules":[{"resources":[{"address":"module.tjth_runner.aws_iam_instance_profile.this","mode":"managed","type":"aws_iam_instance_profile","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"default-profile","name_prefix":null,"path":"/","role":"default-instance-role","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.tjth_runner.aws_iam_policy.this","mode":"managed","type":"aws_iam_policy","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"name":"default-instance-policy","name_prefix":null,"path":"/","policy":"{\"Statement\":[{\"Action\":[\"sts:AssumeRole\",\"sts:TagSession\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"ssm:GetParameter\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ssm:eu-west-1:827047072822:parameter/github_deploy_key\",\"arn:aws:ssm:eu-west-1:827047072822:parameter/github_api_token\",\"arn:aws:ssm:eu-west-1:827047072822:parameter/github_runner_token\",\"arn:aws:ssm:eu-west-1:827047072822:parameter/mongodbatlas_private_key\",\"arn:aws:ssm:eu-west-1:827047072822:parameter/mongodbatlas_public_key\",\"arn:aws:ssm:eu-west-1:827047072822:parameter/cloudflare_api_key\"]}],\"Version\":\"2012-10-17\"}","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.tjth_runner.aws_iam_role.this","mode":"managed","type":"aws_iam_role","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"\"},{\"Action\":[\"sts:AssumeRole\",\"sts:TagSession\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::827047072822:root\"]}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"default-instance-role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"module.tjth_runner.aws_instance.this","mode":"managed","type":"aws_instance","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-00c90dbdc12232b58","credit_specification":[],"get_password_data":false,"hibernation":null,"instance_type":"t2.micro","key_name":"tjth-key","launch_template":[],"metadata_options":[{"http_endpoint":"enabled","http_put_response_hop_limit":2,"http_tokens":"required","instance_metadata_tags":"disabled"}],"root_block_device":[{"delete_on_termination":true,"encrypted":true,"tags":null,"volume_size":30}],"source_dest_check":true,"tags":{"Name":"default"},"tags_all":{"Name":"default"},"timeouts":null,"user_data":"88473b9f2c0d3f543432ea349eaea9db11f0b09c","user_data_replace_on_change":false,"volume_tags":null},"sensitive_values":{"capacity_reservation_specification":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[{}],"network_interface":[],"root_block_device":[{}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}},{"address":"module.tjth_runner.aws_security_group.this","mode":"managed","type":"aws_security_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for default","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["212.159.65.209/32"],"description":"Allow SSH access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"default-sg","revoke_rules_on_delete":false,"tags":{"Name":"default-sg"},"tags_all":{"Name":"default-sg"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}],"address":"module.tjth_runner"}]}},"resource_changes":[{"address":"module.tjth_runner.aws_iam_instance_profile.this","module_address":"module.tjth_runner","mode":"managed","type":"aws_iam_instance_profile","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"default-profile","name_prefix":null,"path":"/","role":"default-instance-role","tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.tjth_runner.aws_iam_policy.this","module_address":"module.tjth_runner","mode":"managed","type":"aws_iam_policy","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"name":"default-instance-policy","name_prefix":null,"path":"/","policy":"{\"Statement\":[{\"Action\":[\"sts:AssumeRole\",\"sts:TagSession\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"ssm:GetParameter\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ssm:eu-west-1:827047072822:parameter/github_deploy_key\",\"arn:aws:ssm:eu-west-1:827047072822:parameter/github_api_token\",\"arn:aws:ssm:eu-west-1:827047072822:parameter/github_runner_token\",\"arn:aws:ssm:eu-west-1:827047072822:parameter/mongodbatlas_private_key\",\"arn:aws:ssm:eu-west-1:827047072822:parameter/mongodbatlas_public_key\",\"arn:aws:ssm:eu-west-1:827047072822:parameter/cloudflare_api_key\"]}],\"Version\":\"2012-10-17\"}","tags":null},"after_unknown":{"arn":true,"id":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.tjth_runner.aws_iam_role.this","module_address":"module.tjth_runner","mode":"managed","type":"aws_iam_role","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"\"},{\"Action\":[\"sts:AssumeRole\",\"sts:TagSession\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::827047072822:root\"]}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"default-instance-role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"module.tjth_runner.aws_instance.this","module_address":"module.tjth_runner","mode":"managed","type":"aws_instance","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-00c90dbdc12232b58","credit_specification":[],"get_password_data":false,"hibernation":null,"instance_type":"t2.micro","key_name":"tjth-key","launch_template":[],"metadata_options":[{"http_endpoint":"enabled","http_put_response_hop_limit":2,"http_tokens":"required","instance_metadata_tags":"disabled"}],"root_block_device":[{"delete_on_termination":true,"encrypted":true,"tags":null,"volume_size":30}],"source_dest_check":true,"tags":{"Name":"default"},"tags_all":{"Name":"default"},"timeouts":null,"user_data":"88473b9f2c0d3f543432ea349eaea9db11f0b09c","user_data_replace_on_change":false,"volume_tags":null},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"capacity_reservation_specification":true,"cpu_core_count":true,"cpu_threads_per_core":true,"credit_specification":[],"disable_api_termination":true,"ebs_block_device":true,"ebs_optimized":true,"enclave_options":true,"ephemeral_block_device":true,"host_id":true,"iam_instance_profile":true,"id":true,"instance_initiated_shutdown_behavior":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"launch_template":[],"maintenance_options":true,"metadata_options":[{}],"monitoring":true,"network_interface":true,"outpost_arn":true,"password_data":true,"placement_group":true,"placement_partition_number":true,"primary_network_interface_id":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":[{"device_name":true,"iops":true,"kms_key_id":true,"throughput":true,"volume_id":true,"volume_type":true}],"secondary_private_ips":true,"security_groups":true,"subnet_id":true,"tags":{},"tags_all":{},"tenancy":true,"user_data_base64":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"capacity_reservation_specification":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[{}],"network_interface":[],"root_block_device":[{}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"module.tjth_runner.aws_security_group.this","module_address":"module.tjth_runner","mode":"managed","type":"aws_security_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for default","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["212.159.65.209/32"],"description":"Allow SSH access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"default-sg","revoke_rules_on_delete":false,"tags":{"Name":"default-sg"},"tags_all":{"Name":"default-sg"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}}],"prior_state":{"format_version":"1.0","terraform_version":"1.2.3","values":{"root_module":{"child_modules":[{"resources":[{"address":"module.tjth_runner.data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"827047072822","arn":"arn:aws:sts::827047072822:assumed-role/terraform_role/GitHubActions","id":"827047072822","user_id":"AROA4BD6Y2Q3CDAAU7EYC:GitHubActions"},"sensitive_values":{}},{"address":"module.tjth_runner.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Europe (Ireland)","endpoint":"ec2.eu-west-1.amazonaws.com","id":"eu-west-1","name":"eu-west-1"},"sensitive_values":{}}],"address":"module.tjth_runner"}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws"}},"root_module":{"module_calls":{"tjth_runner":{"source":"./modules/runner","expressions":{"github_team_url":{"constant_value":"https://github.com/tjtharrison/tcoin"},"runner_name":{"constant_value":"default"}},"module":{"resources":[{"address":"aws_iam_instance_profile.this","mode":"managed","type":"aws_iam_instance_profile","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.runner_name"]},"role":{"references":["aws_iam_role.this.name","aws_iam_role.this"]}},"schema_version":0},{"address":"aws_iam_policy.this","mode":"managed","type":"aws_iam_policy","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.runner_name"]},"policy":{"references":["data.aws_region.current.name","data.aws_region.current","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current","data.aws_region.current.name","data.aws_region.current","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current","data.aws_region.current.name","data.aws_region.current","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current","data.aws_region.current.name","data.aws_region.current","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current","data.aws_region.current.name","data.aws_region.current","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current","data.aws_region.current.name","data.aws_region.current","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current"]}},"schema_version":0},{"address":"aws_iam_role.this","mode":"managed","type":"aws_iam_role","name":"this","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_caller_identity.current.account_id","data.aws_caller_identity.current"]},"managed_policy_arns":{"references":["aws_iam_policy.this.arn","aws_iam_policy.this"]},"name":{"references":["var.runner_name"]}},"schema_version":0},{"address":"aws_instance.this","mode":"managed","type":"aws_instance","name":"this","provider_config_key":"aws","expressions":{"ami":{"constant_value":"ami-00c90dbdc12232b58"},"iam_instance_profile":{"references":["aws_iam_instance_profile.this.id","aws_iam_instance_profile.this"]},"instance_type":{"references":["var.instance_type"]},"key_name":{"constant_value":"tjth-key"},"metadata_options":[{"http_endpoint":{"constant_value":"enabled"},"http_put_response_hop_limit":{"constant_value":2},"http_tokens":{"constant_value":"required"}}],"root_block_device":[{"encrypted":{"constant_value":true},"volume_size":{"constant_value":30}}],"tags":{"references":["var.runner_name"]},"user_data":{"references":["var.github_team_url"]},"vpc_security_group_ids":{"references":["aws_security_group.this.id","aws_security_group.this"]}},"schema_version":1},{"address":"aws_security_group.this","mode":"managed","type":"aws_security_group","name":"this","provider_config_key":"aws","expressions":{"description":{"references":["var.runner_name"]},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"name":{"references":["var.runner_name"]},"tags":{"references":["var.runner_name"]}},"schema_version":1},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"variables":{"github_team_url":{"description":"The team to which to attach the github runner"},"instance_type":{"default":"t2.micro","description":"The instance type to use for the Github action runners"},"runner_name":{"description":"Runner group name to be used in descriptions"}}}}}}},"relevant_attributes":[{"resource":"module.tjth_runner.aws_iam_policy.this","attribute":["arn"]},{"resource":"module.tjth_runner.aws_iam_role.this","attribute":["name"]},{"resource":"module.tjth_runner.aws_iam_instance_profile.this","attribute":["id"]},{"resource":"module.tjth_runner.aws_security_group.this","attribute":["id"]},{"resource":"module.tjth_runner.data.aws_region.current","attribute":["name"]},{"resource":"module.tjth_runner.data.aws_caller_identity.current","attribute":["account_id"]}]}
